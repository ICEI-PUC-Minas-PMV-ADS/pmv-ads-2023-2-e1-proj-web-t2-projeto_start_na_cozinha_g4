<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Start na cozinha</title>
  <link rel="stylesheet" href="style.css">

</head>

<body>
  <header>
    <nav>
      <div class="logo">
        <img src="../img/Logo.png" alt="Start na Cozinha Logo">
        <a href="../paginaHome/paginaHome.html">Start na cozinha</a>
      </div>
    </nav>
  </header>
  <div>
    <div  class="search-container">
      <input id="searchInput" type="text" class="search-input" placeholder="Procure uma receita, ingrediente ou cheff">
      <button onclick="searchRecipes()">Procurar</button>
    </div>
    <div id="results"></div>

    <div class="recipe-bar">
      <div class="recipe">
        <img src="../img/Lasanha.jpg" alt="Receita 1">
        <ul>
          <li><a href="../pgvisureceita/pgvisureceita.html?index=0" id="receita1" data-titulo=""> Lasanha Bolonhesa</a></li>
         

      </ul>
      </div>
      <div class="recipe">
        <img src="../img/Salmao.jpg" alt="Receita 2">
        <ul>
          <li><a href="../pgvisureceita/pgvisureceita.html?index=1" id="receita2" data-titulo=""> Salmão</a></li>
         

      </ul>
      </div>
      <div class="recipe">
        <img src="../img/cake_receita.jpg" alt="Receita 1">
        <ul>
          <li><a href="../pgvisureceita/pgvisureceita.html?index=2" id="receita3" data-titulo=""> Bolo de Morango</a></li>

      </ul>
      </div>
      <div class="recipe">
        <img src="../img/arroz.jpg" alt="Receita 2">
        <ul>
          <li><a href="../pgvisureceita/pgvisureceita.html?index=3" id="receita3" data-titulo="">Arroz com legumes</a></li>

      </ul>
      </div>
      <div class="recipe">
        <img src="../img/batata.jpg" alt="Receita 1">
        <ul>
          <li><a href="../pgvisureceita/pgvisureceita.html?index=4" id="receita3" data-titulo=""> Batata doce</a></li>

      </ul>
      </div>
      <div class="recipe">
        <img src="../img/feijao.png" alt="Receita 2">
        <ul>
          <li><a href="../pgvisureceita/pgvisureceita.html?index=5" id="receita3" data-titulo=""> Feijão tropeiro</a></li>

      </ul>
      </div>
    </div>
    <h1 class="container-h1"> Inicie a preparação de uma receita agora</h1>
    <div class="dropdown-bar">
     
      <div class="dropdown">
        <h4>Almoços</h4>
        <select id="categoria1" onchange="handleCategoryChange()">
          <option value="todos">Todos</option>
          <option value="Feijão">Feijão</option>
          <option value="Batata">Batata</option>
        </select>
      </div>
      <div class="dropdown">
        <h4> Peixes</h4>
        <select id="categoria2" onchange="handleCategoryChange()">
          <option value="todos">Todos</option>
          <option value="Arroz">Arroz</option>
          <option value="Legumes">Legumes</option>
        </select>
      </div>
      <div class="dropdown">
        <h4> Dia a Dia</h4>
        <select id="categoria3" onchange="handleCategoryChange()">
          <option value="todos">Todos</option>
          <option value="Bolos">Dia a dia</option>
          <option value="maca">Maçã</option>
        </select>
      </div>
      <div class="dropdown">
        <h4> Massas </h4>
        <select id="categoria4" onchange="handleCategoryChange()">
          <option value="todos">Todos</option>
          <option value="massas">Massas</option>
          <option value="lasanha">Lasanha</option>
        </select>
      </div>
      
      <!-- Adicione um div para exibir os resultados -->
      <div id="results"></div>
    </div>

    <footer>
      <div class="left"></div>
      <div class="copy">
        <p> Copyright 2023 - Todos os direitos reservados.</p>
      </div>
      
    </footer>
  </div>

  <script>
const recipesData = {
  "receitas": [
    {
      "nome": "Lasanha à Bolonhesa",
      "modo_de_preparo": "1. Cozinhe a massa da lasanha em água fervente com sal. \n2. Prepare o molho à bolonhesa com carne moída, molho de tomate, cebola, alho e temperos. \n3. Em um refratário, monte camadas de massa, molho e queijo. \n4. Repita as camadas até terminarem os ingredientes. \n5. Leve ao forno por 30 minutos ou até gratinar.",
      "ingredientes": [
        "500g de massa para lasanha",
        "400g de carne moída",
        "500ml de molho de tomate",
        "1 cebola picada",
        "2 dentes de alho picados",
        "250g de queijo mussarela",
        "Sal e pimenta a gosto",
        "Orégano a gosto"
      ],
      "categorias": ["Massas"],
      "Nome_Chef": "Ana Beatriz",
      "imagemChef": "../img/icon_chef.png", 
      "tempo_de_preparo": "30 minutos",
      "imagemTimer": "../img/icon_timer.png",
      "Nivel_de_dificuldade": "Médio",
      "imagemFry": "../img/icon_fryingpan.png"   
    },
    {
      "nome": "Salmão Grelhado",
      "modo_de_preparo": "1. Tempere os filés de salmão com sal, pimenta e limão. \n2. Aqueça a grelha ou frigideira. \n3. Grelhe o salmão por 4-5 minutos de cada lado. \n4. Sirva com acompanhamentos a gosto.",
      "ingredientes": [
        "4 filés de salmão",
        "Sal e pimenta a gosto",
        "Suco de limão",
        "Azeite"
      ],
      "categorias": ["Peixes"],
      "tempo_de_preparo":"10 minutos",
      "imagemTimer": "../img/icon_timer.png",
      "Nivel_de_dificuldade":"Fácil",
      "imagemFry": "../img/icon_fryingpan.png",
      "Nome_Chef": "Isabella Smith",
      "imagemChef": "../img/icon_chef.png"
    },
    {
      "nome": "Bolo de Morango",
      "modo_de_preparo": "1 - Bata na batedeira as claras em neve, adicione as gemas uma a uma e continue batendo, junte o açúcar e bata mais um pouco. \n2 - Junte a farinha peneirada e o leite bem quente e mexa bem, sem bater, por último coloque o fermento. \n3 - Leve para assar em forma redonda sem buraco no meio, untada e enfarinhada em forno pré-aquecido em temperatura média por no máximo 30 minutos ou quando tiver dourado e bem sequinho. \n3- Cresce bastante e fica bem fofinho.",
      "ingredientes": [
        "5 ovos",
        "2 xícaras (chá) de farinha de trigo",
        "1 colher (sopa) de fermento em pó",
        "2 xícaras (chá) de açúcar",
        "1 xícara (cha) de leite quente"
      ],
      "categorias": ["Bolos"],
      "Nome_Chef": "Ana Beatriz",
      "imagemChef": "../img/icon_chef.png",
      "tempo_de_preparo": "1 hora e 30 minutos",
      "imagemTimer": "../img/icon_timer.png",
      "Nivel_de_dificuldade": "Alta",
      "imagemFry": "../img/icon_fryingpan.png"
    },
    {
      "nome": "Arroz com Legumes",
      "modo_de_preparo": "1 – Refogue o alho e a cebola no azeite \n2 – Coloque o arroz e deixe fritar por cerca de 30 segundos \n3 – Adicione a água fervente juntamente com os legumes e o sal \n4 – Abaixe o fogo e deixe cozinhar até a água ter quase secado \n5 - Tampe a panela e aguarde cerca de 20 minutos antes de servir Se desejar fazer mais, é só seguir as proporções, principalmente da água",
      "ingredientes": [
        "2 xícaras Arroz Novato lavado",
        "4 xícaras água fervente",
        "2 dentes alho amassado",
        "1/2 cebola picada",
        "150g ervilha",
        "150g milho",
        "150g vagem picada",
        "150g cenoura picada",
        "Azeite",
        "Sal a gosto"
      ],
      "categorias": ["Arroz", "Legumes"],
      "Nome_Chef": "Ana Beatriz",
      "imagemChef": "../img/icon_chef.png",
      "tempo_de_preparo": "15 minutos",
      "imagemTimer": "../img/icon_timer.png",
      "Nivel_de_dificuldade": "Baixa",
      "imagemFry": "../img/icon_fryingpan.png"
    },
    {
      "nome": "Batata Doce",
      "modo_de_preparo": "1. Lave, seque e descasque as batatas-doces. Corte em meias-luas grossas e transfira para uma panela média. Cubra com água e tempere com ½ colher (chá) de sal. \n2. Leve ao fogo alto e, assim que ferver, deixe cozinhar por cerca de 20 minutos, ou até ficarem macias - para verificar, espete com um garfo. \n3. Desligue o fogo e reserve 1 xícara (chá) da água do cozimento. Escorra as batatas por uma peneira. \n4. Volte as batatas, ainda quentes, para a mesma panela e bata com um mixer até ficar bem liso. Acrescente, aos poucos, a água do cozimento para dar o ponto. Se preferir um purê mais rústico, passe as batatas por um espremedor. \n5. Junte a manteiga e mexa bem com uma espátula até derreter e o purê ficar cremoso. Prove e, se necessário, tempere com mais sal. Sirva a seguir.",
      "ingredientes": [
        "3 batatas-doces brancas",
        "limao",
        "1 xícara (chá) da água do cozimento",
        "2 colheres (sopa) de manteiga gelada",
        "sal a gosto"
      ],
      "categorias": ["Batata"],
      "Nome_Chef": "Ana Beatriz",
      "imagemChef": "../img/icon_chef.png",
      "tempo_de_preparo": "1 hora",
      "imagemTimer": "../img/icon_timer.png",
      "Nivel_de_dificuldade": "Média",
      "imagemFry": "../img/icon_fryingpan.png"
    },
    {
      "nome": "Feijão Tropeiro",
      "modo_de_preparo": "1. Em uma panela grande (28cm de diâmetro), aqueça 1 colher de sopa de azeite, frite o bacon e reserve. Em seguida, frite e reserve os gomos de linguiça calabresa. \n2. Na mesma panela, frite a cebola e o alho e, depois, junte-os ao feijão escorrido. \n3. Junte novamente o bacon e a linguiça, e adicione a farinha de mandioca e os ovos mexidos. \n4. Acrescente a salsa e a cebolinha picadas. \n5. Tempere com o tempero em pó Knorr Meu Feijão. Prontinho, já pode servir!",
      "ingredientes": [
      "2 colheres de sopa de azeite",
      "1 xícara de chá de bacon picado",
      "1 xícara de chá de linguiça calabresa de porco fatiada",
      "1 cebola picada",
      "3 dentes de alho amassados",
      "2 xícaras de chá de feijão carioca cozido e escorrido",
      "1 1/2 colher de sopa de farinha de mandioca",
      "2 ovos mexidos",
      "1/2 xícara de chá de cheiro-verde (salsa e cebolinha)",
      "1 sachê de Tempero em Pó"
      ],
      "categorias": ["Feijão"],
      "Nome_Chef": "Ana Beatriz",
      "imagemChef": "../img/icon_chef.png",
      "tempo_de_preparo": "20 minutos",
      "imagemTimer": "../img/icon_timer.png",
      "Nivel_de_dificuldade": "Média",
      "imagemFry": "../img/icon_fryingpan.png"
    }
  ]
};

  function handleCategoryChange() {
    searchRecipes();
  }
  function closeModal() {
    const openModals = document.querySelectorAll('dialog[open]');
    openModals.forEach(modal => modal.close());
  }

// function searchRecipes() {
//   const searchInput = document.getElementById('searchInput').value.toLowerCase();
//   const categoria1 = document.getElementById('categoria1').value.toLowerCase();
//   const categoria2 = document.getElementById('categoria2').value.toLowerCase();
//   const categoria3 = document.getElementById('categoria3').value.toLowerCase();
//   const categoria4 = document.getElementById('categoria4').value.toLowerCase();
//   const resultsContainer = document.getElementById('results');
//   resultsContainer.innerHTML = '';

//   // Obtenha os dados do localStorage e analise-os para obter o objeto recipeData
//   const storedData = localStorage.getItem('recipeData');
//   const recipesData = storedData ? JSON.parse(storedData) : { receitas: [] };

//   const filteredRecipes = recipesData.receitas.filter(recipe => {
//     return (
//       (recipe.nome && recipe.nome.toLowerCase().includes(searchInput)) ||
//       (recipe.ingredientes && recipe.ingredientes.some(ingredient => ingredient && ingredient.toLowerCase().includes(searchInput))) ||
//       (recipe.Nome_Chef && recipe.Nome_Chef.toLowerCase().includes(searchInput)) ||
//       (categoria1 !== 'todos' && recipe.categorias && recipe.categorias.includes(categoria1)) ||
//       (categoria2 !== 'todos' && recipe.categorias && recipe.categorias.includes(categoria2)) ||
//       (categoria3 !== 'todos' && recipe.categorias && recipe.categorias.includes(categoria3)) ||
//       (categoria4 !== 'todos' && recipe.categorias && recipe.categorias.includes(categoria4))
//     );
//   });

//   if (filteredRecipes.length > 0) {
//     filteredRecipes.forEach(recipe => {
//       const recipeElement = document.createElement('dialog');
//       recipeElement.innerHTML = `<h2>${recipe.nome}</h2>
//                                  <p>Chef: ${recipe.Nome_Chef}</p>
//                                  <p>Ingredientes: ${recipe.ingredientes ? recipe.ingredientes.join(', ') : 'N/A'}</p>
//                                  <p>Dificuldade: ${recipe.Nivel_de_dificuldade}</p>
//                                  <p>Tempo de preparação: ${recipe.tempo_de_preparo}</p>
//                                  <button onclick="closeModal()">Voltar</button>
//                                  <hr>`;
//       resultsContainer.appendChild(recipeElement);
//       recipeElement.showModal();

//       const closeModalButtons = recipeElement.getElementsByTagName("button");
//       for (let closeButton of closeModalButtons) {
//         closeButton.onclick = function () {
//           recipeElement.close();
//         };
//       }
//     });
//   } else {
//     resultsContainer.innerHTML = '<p>Nenhuma receita encontrada.</p>';
//   }
// }
//****criando link
function searchRecipes() {
  const searchInput = document.getElementById('searchInput').value.toLowerCase();
  const categoria1 = document.getElementById('categoria1').value.toLowerCase();
  const categoria2 = document.getElementById('categoria2').value.toLowerCase();
  const categoria3 = document.getElementById('categoria3').value.toLowerCase();
  const categoria4 = document.getElementById('categoria4').value.toLowerCase();
  const resultsContainer = document.getElementById('results');
  resultsContainer.innerHTML = '';

  // Obtenha os dados do localStorage e analise-os para obter o objeto recipeData
  const storedData = localStorage.getItem('recipeData');
  const recipesData = storedData ? JSON.parse(storedData) : { receitas: [] };

  const filteredRecipes = recipesData.receitas.filter(recipe => {
    return (
      (recipe.nome && recipe.nome.toLowerCase().includes(searchInput)) ||
      (recipe.ingredientes && recipe.ingredientes.some(ingredient => ingredient && ingredient.toLowerCase().includes(searchInput))) ||
      (recipe.Nome_Chef && recipe.Nome_Chef.toLowerCase().includes(searchInput)) ||
      (categoria1 !== 'todos' && recipe.categorias && recipe.categorias.includes(categoria1)) ||
      (categoria2 !== 'todos' && recipe.categorias && recipe.categorias.includes(categoria2)) ||
      (categoria3 !== 'todos' && recipe.categorias && recipe.categorias.includes(categoria3)) ||
      (categoria4 !== 'todos' && recipe.categorias && recipe.categorias.includes(categoria4))
    );
  });

  if (filteredRecipes.length > 0) {
    filteredRecipes.forEach(recipe => {
      // Crie um link para cada receita
      const recipeLink = document.createElement('a');
      recipeLink.href = '#'; // Altere isso para o caminho apropriado da sua página de detalhes da receita
      recipeLink.textContent = recipe.nome;
      recipeLink.onclick = function() {
        // Ao clicar no link, exiba o modal com os detalhes da receita
        displayRecipeDetails(recipe);
        return false; // Isso evita a navegação padrão do link
      };

      // Adicione o link à lista de resultados
      resultsContainer.appendChild(recipeLink);
      resultsContainer.appendChild(document.createElement('br')); // Adicione uma quebra de linha para separar os links
    });
  } else {
    resultsContainer.innerHTML = '<p>Nenhuma receita encontrada.</p>';
  }
}
//by categoria
// function searchRecipesByCategory() {
//   const categoria1 = document.getElementById('categoria1').value.toLowerCase();
//   const categoria2 = document.getElementById('categoria2').value.toLowerCase();
//   const categoria3 = document.getElementById('categoria3').value.toLowerCase();
//   const categoria4 = document.getElementById('categoria4').value.toLowerCase();
//   const resultsContainer = document.getElementById('results');
//   resultsContainer.innerHTML = '';

//   const filteredRecipes = recipesData.receitas.filter(recipe => {
//     return (
//       (categoria1 !== 'todos' && recipe.categorias && recipe.categorias.includes(categoria1)) ||
//       (categoria2 !== 'todos' && recipe.categorias && recipe.categorias.includes(categoria2)) ||
//       (categoria3 !== 'todos' && recipe.categorias && recipe.categorias.includes(categoria3)) ||
//       (categoria4 !== 'todos' && recipe.categorias && recipe.categorias.includes(categoria4))
//     );
//   });

//   if (filteredRecipes.length > 0) {
//     filteredRecipes.forEach(recipe => {
//       // Crie um link para cada receita
//       const recipeLink = document.createElement('a');
//       recipeLink.href = '#'; // Altere isso para o caminho apropriado da sua página de detalhes da receita
//       recipeLink.textContent = recipe.nome;
//       recipeLink.onclick = function () {
//         // Ao clicar no link, exiba o modal com os detalhes da receita
//         displayRecipeDetails(recipe);
//         return false; // Isso evita a navegação padrão do link
//       };

//       // Adicione o link à lista de resultados
//       resultsContainer.appendChild(recipeLink);
//       resultsContainer.appendChild(document.createElement('br')); // Adicione uma quebra de linha para separar os links
//     });
//   } else {
//     resultsContainer.innerHTML = '<p>Nenhuma receita encontrada para a categoria selecionada.</p>';
//   }
// }

// // Adicione a chamada da função searchRecipesByCategory() no evento onchange dos selects
// document.getElementById('categoria1').onchange = searchRecipesByCategory();
// document.getElementById('categoria2').onchange = searchRecipesByCategory();
// document.getElementById('categoria3').onchange = searchRecipesByCategory();
// document.getElementById('categoria4').onchange = searchRecipesByCategory();

function displayRecipeDetails(recipe) {
  // Crie e exiba um modal com os detalhes da receita
  const recipeElement = document.createElement('dialog');
  recipeElement.innerHTML = `<h2>${recipe.nome}</h2>
                             <p>Chef: ${recipe.Nome_Chef}</p>
                             <p>Ingredientes: ${recipe.ingredientes ? recipe.ingredientes.join(', ') : 'N/A'}</p>
                             <p>Dificuldade: ${recipe.Nivel_de_dificuldade}</p>
                             <p>Tempo de preparação: ${recipe.tempo_de_preparo}</p>
                             <button onclick="closeModal()">Voltar</button>
                             <hr>`;
  document.body.appendChild(recipeElement);
  recipeElement.showModal();

  const closeModalButton = recipeElement.querySelector('button');
  closeModalButton.onclick = function() {
    recipeElement.close();
    // Remova o modal do DOM após fechar
    document.body.removeChild(recipeElement);
  };
}

    document.addEventListener("DOMContentLoaded", function() {
        // Carrega o JSON de receitas
        // fetch('receitas.json')
        //     .then(function(response) {
        //         return response.json();
        //     })
        //     .then(function(data) {
        //         // Obtém os links das receitas
        //         const linksReceitas = document.querySelectorAll('.list ul li a');
    
        //         // Atualiza os links com os títulos do JSON
        //         data.receitas.forEach(function(receita, index) {
        //             const linkReceita = linksReceitas[index];
        //             linkReceita.textContent = receita.nome; // Assume que o título está na propriedade "nome"
        //             linkReceita.dataset.titulo = receita.nome; // Armazena o título no atributo data-titulo
        //         });
        //     })
        //     .catch(function(error) {
        //         console.error('Ocorreu um erro ao carregar o JSON:', error);
        //     });
        //***funcina duplicando 
  //       const existingRecipesString = localStorage.getItem('recipeData');
  // const existingRecipes = existingRecipesString ? JSON.parse(existingRecipesString) : { "receitas": [] };

  // // Adiciona as novas receitas à lista existente
  // recipesData.receitas.forEach(newRecipe => {
  //   existingRecipes.receitas.push(newRecipe);
  // });

  // // Salva a lista atualizada no localStorage
 
  // localStorage.setItem('recipeData', JSON.stringify(existingRecipes));
  // Carrega as receitas existentes do localStorage
  const existingRecipesString = localStorage.getItem('recipeData');
  const existingRecipes = existingRecipesString ? JSON.parse(existingRecipesString) : { "receitas": [] };

  // Obtém as novas receitas do JSON (supondo que você tenha uma variável recipesData)
  const newRecipes = recipesData.receitas;

  // Itera sobre as novas receitas
  newRecipes.forEach(newRecipe => {
    // Verifica se a receita já existe na lista de receitas
    const recipeExists = existingRecipes.receitas.some(existingRecipe => existingRecipe.nome === newRecipe.nome);

    // Se a receita não existe, adiciona à lista existente
    if (!recipeExists) {
      existingRecipes.receitas.push(newRecipe);
    }
  });

  // Salva a lista atualizada no localStorage
  localStorage.setItem('recipeData', JSON.stringify(existingRecipes));
  
});
  </script>
</body>

</html>
